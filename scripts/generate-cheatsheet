#! /usr/bin/env bash
#
# Wrapper for generating the cheatsheets from the semgrep repo.
#
set -euo pipefail

repo_root=$(git rev-parse --show-toplevel)
out=$(pwd)/cheatsheet.json

(
  cd "$repo_root"/semgrep

  pipenv run python3 ../scripts/generate_cheatsheet.py --json --directory \
    ../semgrep-core/tests \
    --output-file "$out"
  cat <<EOF
Created $out.
Copy that file to the semgrep-app repo: /frontend/src/assets/cheatsheet.json
EOF
)
